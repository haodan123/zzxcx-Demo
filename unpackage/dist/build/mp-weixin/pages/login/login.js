"use strict";const e=require("../../common/vendor.js");require("../../network/request.js");const o=require("../../common/assets.js");if(require("../../config/global-config.js"),!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const n={__name:"login",setup(n){const s=e.ref(null),r=e.ref(!1),a=e.ref({phone:"",password:""}),i=async()=>{try{console.log("denlu"),await s.value.validate(),r.value=!0;const o=await e.index.$post("/loginIng",a.value);if(console.log(o),"账号或密码输入错误"==o.msg)return r.value=!1,e.index.showToast({title:o.msg,icon:"none"});e.index.setStorageSync("user",o.data),e.index.showToast({title:"登录成功",icon:"none"}),setTimeout((()=>{e.index.reLaunch({url:"/pages/home/index/index"})}),500)}catch(o){console.log("shibai")}finally{r.value=!1}};return e.onMounted((()=>{const o=e.index.getStorageSync("user");console.log(o),o.phone&&e.index.reLaunch({url:"/pages/home/index/index"})})),(n,u)=>({a:e.unref(o.tu),b:e.o((e=>a.value.phone=e)),c:e.p({prefixIcon:"person",type:"text",placeholder:"请输入账号",modelValue:a.value.phone}),d:e.p({"label-width":"55px",label:"账号:",required:!0,name:"phone",rules:[{required:!0,errorMessage:"请输入账号"}]}),e:e.o((e=>a.value.password=e)),f:e.p({prefixIcon:"locked",type:"password",placeholder:"请输入密码",modelValue:a.value.password}),g:e.p({"label-width":"55px",required:!0,label:"密码:",name:"password",rules:[{required:!0,errorMessage:"请输入密码"}]}),h:e.sr(s,"71b30be8-0",{k:"form"}),i:e.p({modelValue:a.value}),j:e.o(i),k:r.value,l:r.value})}},s=e._export_sfc(n,[["__scopeId","data-v-71b30be8"]]);wx.createPage(s);
